# Fastapi and Telegram bot app

### Для запуска всех процессов вам потребуется 4 вкладки терминала
### Клонируем проект
```bash
git clone https://github.com/TimurZheksimbaev/Telegram-bot-and-FastAPI-Task.git
```

### Для начала установите `ngrok`, если его нет, он нужен для WebApp, она требует https сервер 
### Если есть, запустите следующую команду
```bash
ngrok http http://localhost:8000
```
### Вы увидите внешнюю ссылку на ваш локальный сервер, скопируйте ее
*Она будет выглядеть примерно так: https://62f0-188-130-155-182.ngrok-free.app*

### Дальше вам надо будет создать двух телеграм ботов и получить их токены, один для продакшна, второй для админа.
Вот ссылка для создания телеграм ботов [ссылка](https://t.me/BotFather)


### Дальше скопируйте `.env.local` в `.env` в корне проекта
```bash
cp .env.local .env
```
#### Скопируйте `.env` файл и поместите его в директорию `telegram_bots`
- Поместите скопированную из `ngrok` ссылку в переменную `API_URL`
- Поместите токен бота для продакшна в переменную `PROD_TELEGRAM_BOT_TOKEN`
- Поместите токен бота для админа в переменную `ADMIN_TELEGRAM_BOT_TOKEN`
- Добавьте свой секретный ключ для токена в переменную `TOKEN_SECRET`
- Измените переменные в обоих файлах `.env`(в корне проекта и `telegram_bots` папке)

## *В новом терминале запустите сервер FastAPI*
```bash
python3 main.py
```

## *Создайте еще один терминал и запустите в нем продакшн бота*
```bash
cd telegram_bots
python3 user_bot.py
```

## *Так же создайте еще один терминал и запустите админ бота*
```bash
cd telegram_bots
python3 admin_bot.py
```
### В итоге открыто 4 вкладки терминала и запущено 4 процесса
#### В телеграме запускаете продакшн бота, как обычно командой `/start`
#### Так же запускаете админ бота
#### Оба телеграм бота интуитивно понятные

### Документация - http://localhost:8000/docs
### Описание тестового задания - https://docs.google.com/document/d/1i9YTAuyxFbp4eMciHgx0coXZpdkxZilkhbzSGCKMPJ4/edit
Прошу прощения, что не использовал docker в этом проекте, я столкнулся с множеством проблем в ходе разборки с докером, и уже не успевал до дедлайна.
